@model RentAppMVC.Models.BusinessCustomer

<div class="form-group">
    <label for="companyName">Company Name:</label>
    <input type="text" class="form-control" id="companyName" name="CompanyName" value="@Model?.CompanyName" />
</div>
<div class="form-group">
    <label for="cvr">CVR:</label>
    <input type="text" class="form-control" id="cvr" name="CVR" value="@Model?.CVR" />
</div>
<div class="form-group">
    <label for="phoneNumber">Phone Number:</label>
    <input type="text" class="form-control" id="phoneNumber" name="PhoneNumber" value="@Model?.PhoneNumber" />
</div>

<button type="button" id="saveButton" class="btn btn-primary">Save</button>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#saveButton').click(function () {
                // Collect data from the form fields
                var companyName = $('#companyName').val();
                var cvr = $('#cvr').val();
                var phoneNumber = $('#phoneNumber').val();

                // Create an object to hold the data
                var businessCustomerData = {
                    CompanyName: companyName,
                    CVR: cvr,
                    PhoneNumber: phoneNumber
                };

                // Send a POST request to the controller action for saving
                $.ajax({
                    url: '@Url.Action("Save", "BusinessCustomer")',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(businessCustomerData),
                    success: function (result) {
                        // Handle success response
                        alert('Data saved to the database!');
                        // Optionally, you can redirect the user to another page
                        // window.location.href = '@Url.Action("Index", "Home")';
                    },
                    error: function (xhr, status, error) {
                        // Handle error response
                        console.error(xhr.responseText);
                        alert('An error occurred while saving data!');
                    }
                });
            });
        });
    </script>
}
